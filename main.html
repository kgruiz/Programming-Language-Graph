<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0"
        />
        <title>Interactive Programming Language Graph</title>
        <script
            type="text/javascript"
            src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"
        ></script>
        <style>
            body,
            html {
                margin: 0;
                padding: 0;
                height: 100%;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI',
                    Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji',
                    'Segoe UI Emoji', 'Segoe UI Symbol';
                overflow: hidden;
                background-color: #1c1c1e; /* Apple Dark Mode Background */
                color: #f5f5f7;
                display: flex;
                flex-direction: column;
            }

            #controlsContainer {
                padding: 12px 20px;
                background-color: #2c2c2e; /* Slightly Lighter Dark Gray */
                border-bottom: 1px solid #3a3a3c; /* Subtle Separator */
                display: flex;
                flex-wrap: wrap;
                gap: 12px;
                align-items: center;
                box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2); /* Subtle shadow */
            }

            #controlsContainer label {
                font-size: 14px;
                color: #a0a0a5; /* Lighter gray for label */
                margin-right: -4px; /* Pull closer to select */
            }

            #controlsContainer select,
            #controlsContainer button {
                padding: 8px 14px;
                border-radius: 8px;
                border: 1px solid #48484a;
                background-color: #363638; /* Control Background */
                color: #f5f5f7;
                cursor: pointer;
                font-size: 14px;
                transition: background-color 0.15s ease, border-color 0.15s ease,
                    box-shadow 0.15s ease;
                box-shadow: 0 1px 1px rgba(0, 0, 0, 0.15);
            }
            #controlsContainer select {
                min-width: 180px; /* Give select more space for full names */
                /* Basic custom arrow styling */
                background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 4 5'%3e%3cpath fill='%23a0a0a5' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e");
                background-repeat: no-repeat;
                background-position: right 0.7em top 50%;
                background-size: 0.65em auto;
                -webkit-appearance: none;
                -moz-appearance: none;
                appearance: none;
                padding-right: 2.5em; /* Space for arrow */
            }

            #controlsContainer select:hover,
            #controlsContainer button:hover {
                background-color: #464649;
                border-color: #5a5a5e;
            }

            #controlsContainer button:active {
                background-color: #2a2a2c;
                box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
            }

            #controlsContainer button.active-highlight-good,
            #controlsContainer button.active-highlight-bad {
                color: white;
                font-weight: 500;
            }
            #controlsContainer button.active-highlight-good {
                background-color: #30d158; /* Brighter Apple Green */
                border-color: #28a745;
                box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1),
                    0 0 0 2px rgba(48, 209, 88, 0.3);
            }
            #controlsContainer button.active-highlight-bad {
                background-color: #ff453a; /* Brighter Apple Red */
                border-color: #d9362f;
                box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1),
                    0 0 0 2px rgba(255, 69, 58, 0.3);
            }
            #controlsContainer button#resetHighlights {
                background-color: #0a84ff; /* Apple Blue */
                color: white;
                border-color: #0060df;
            }
            #controlsContainer button#resetHighlights:hover {
                background-color: #0073e6;
            }

            #graphContainer {
                flex-grow: 1;
                position: relative;
                overflow: hidden;
            }

            #languageGraph {
                width: 100%;
                height: 100%;
                border: none;
                box-sizing: border-box;
                background-color: #1c1c1e; /* Match body background */
            }

            #loadingMessage {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                font-size: 1.1em;
                color: #a0a0a5;
                z-index: 10;
            }

            #sidebar {
                width: 420px; /* Slightly wider for full names */
                max-height: calc(
                    100vh - 40px - 75px
                ); /* Adjust for controls height (approx 55px + padding) */
                background-color: rgba(
                    44,
                    44,
                    46,
                    0.88
                ); /* Dark Gray, slightly more opaque */
                backdrop-filter: blur(12px) saturate(180%);
                -webkit-backdrop-filter: blur(12px) saturate(180%);
                border: 0.5px solid rgba(120, 120, 120, 0.4);
                border-radius: 14px; /* More pronounced rounding */
                box-sizing: border-box;
                padding: 20px;
                overflow-y: auto;
                color: #f5f5f7;
                position: absolute;
                right: 20px;
                top: 20px;
                z-index: 1000;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.35); /* Softer, more spread shadow */
                display: none;
                transition: opacity 0.25s ease-in-out,
                    transform 0.25s ease-in-out;
                opacity: 0;
                transform: scale(0.97) translateX(10px);
            }

            #sidebar.visible {
                display: block;
                opacity: 1;
                transform: scale(1) translateX(0);
            }

            #sidebar h2 {
                /* Language Name */
                margin-top: 0;
                margin-bottom: 12px;
                font-size: 1.4em;
                color: #fff;
                border-bottom: 1px solid rgba(120, 120, 120, 0.3);
                padding-bottom: 12px;
                font-weight: 600;
            }

            #languageTagsList {
                list-style: none;
                padding: 0;
                margin: 0 0 18px 0;
                display: flex;
                flex-wrap: wrap;
                gap: 8px;
            }
            #languageTagsList li {
                padding: 6px 12px;
                border-radius: 15px; /* Pill shape */
                font-size: 0.88em;
                font-weight: 500;
                color: #fff;
                box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
            }

            #sidebar h3 {
                /* Section Headers */
                margin-top: 20px;
                margin-bottom: 10px;
                font-size: 1.05em;
                color: #c0c0c5; /* Lighter gray */
                font-weight: 600;
                text-transform: uppercase; /* Optional: for section header style */
                letter-spacing: 0.5px; /* Optional */
            }

            #sidebar ul:not(#languageTagsList) {
                list-style: none;
                padding: 0;
                margin: 0 0 18px 0;
            }

            #sidebar li:not(#languageTagsList li) {
                margin-bottom: 7px;
                color: #d2d2d7; /* Slightly lighter list item text */
                font-size: 0.98em;
            }

            #sidebar pre {
                /* Code block */
                background-color: rgba(20, 20, 22, 0.75);
                border: 1px solid rgba(80, 80, 80, 0.5);
                border-radius: 8px;
                padding: 14px;
                font-family: 'SF Mono', 'Menlo', 'Monaco', 'Consolas', monospace;
                font-size: 0.9em;
                color: #e0e0e0;
                white-space: pre-wrap;
                word-wrap: break-word;
                line-height: 1.45;
            }

            #closeSidebar {
                position: absolute;
                top: 15px;
                right: 15px;
                background: rgba(100, 100, 100, 0.3);
                border: none;
                border-radius: 50%;
                width: 28px;
                height: 28px;
                font-size: 17px;
                font-weight: normal; /* Less bold for 'x' */
                color: #e0e0e0;
                cursor: pointer;
                padding: 0;
                line-height: 28px;
                text-align: center;
                transition: background-color 0.15s ease, color 0.15s ease;
            }
            #closeSidebar:hover {
                background-color: rgba(120, 120, 120, 0.5);
                color: #fff;
            }

            .collapsible-section h3 {
                cursor: pointer;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }
            .collapsible-content {
                overflow: hidden;
                max-height: 800px;
                transition: max-height 0.3s ease-in-out,
                    padding 0.3s ease-in-out, margin 0.3s ease-in-out;
                padding-top: 5px;
                padding-bottom: 5px;
            }
            .collapsible-content.collapsed {
                max-height: 0;
                padding-top: 0;
                padding-bottom: 0;
                margin-top: 0;
                margin-bottom: 0;
            }
            .toggle-arrow {
                display: inline-block;
                transition: transform 0.3s ease;
                font-size: 0.8em;
                color: #a0a0a5; /* Match subheading color */
            }
            .toggle-arrow.collapsed-arrow {
                transform: rotate(-90deg);
            }

            .vis-navigation .vis-button {
                background-color: #363638;
                border: 1px solid #48484a;
                border-radius: 8px;
                box-shadow: 0 1px 1px rgba(0, 0, 0, 0.15);
                color: #e0e0e0;
                font-size: 18px; /* Keep vis buttons slightly larger */
                width: 32px;
                height: 32px;
                padding: 0;
                display: flex;
                align-items: center;
                justify-content: center;
                transition: background-color 0.15s ease-in-out;
            }
            .vis-navigation .vis-button:hover {
                background-color: #464649;
            }
            .vis-navigation {
                position: absolute;
                bottom: 20px;
                left: 20px;
                z-index: 5;
            }
            .vis-zoomExtends {
                display: none;
            }
        </style>
    </head>
    <body>
        <div id="controlsContainer">
            <label for="categorySelect">Highlight Category:</label>
            <select id="categorySelect"></select>
            <button
                id="highlightGoodBtn"
                data-type="good"
            >
                👍 Good In
            </button>
            <button
                id="highlightBadBtn"
                data-type="bad"
            >
                👎 Bad In
            </button>
            <button id="resetHighlights">Reset All</button>
        </div>
        <div id="graphContainer">
            <div id="languageGraph"></div>
            <div id="loadingMessage">Loading graph...</div>
            <div id="sidebar">
                <button id="closeSidebar">×</button>
                <h2 id="sidebarTitle">Language Details</h2>
                <ul id="languageTagsList"></ul>
                <h3>Influenced By:</h3>
                <ul id="influencedByList"></ul>
                <h3>Influences:</h3>
                <ul id="influencesList"></ul>
                <div class="collapsible-section">
                    <h3 id="rankingsHeader">
                        Category Rankings <span class="toggle-arrow">▼</span>
                    </h3>
                    <ul
                        id="rankingsList"
                        class="collapsible-content"
                    ></ul>
                </div>
                <h3>Basic Syntax Example:</h3>
                <pre id="syntaxExample">Select a language node.</pre>
            </div>
        </div>

        <script type="text/javascript">
            const syntaxData = {
                /* Omitted for brevity, same as before */
                Python: `print("Hello, World!")\n\n# Variable\nmessage = "This is Python"`,
                JavaScript: `console.log("Hello, World!");\n\n// Variable\nlet message = "This is JavaScript";`,
                Java: `public class HelloWorld {\n    public static void main(String[] args) {\n        System.out.println("Hello, World!");\n        \n        // Variable\n        String message = "This is Java";\n    }\n}`,
                'C++': `#include <iostream>\n\nint main() {\n    std::cout << "Hello, World!" << std::endl;\n    \n    // Variable\n    std::string message = "This is C++";\n    return 0;\n}`,
                C: `#include <stdio.h>\n\nint main() {\n   printf("Hello, World!\\n");\n   \n   // Variable (string is char array)\n   char message[] = "This is C";\n   return 0;\n}`,
                Ruby: `puts "Hello, World!"\n\n# Variable\nmessage = "This is Ruby"`,
                Swift: `print("Hello, World!")\n\n// Variable\nvar message = "This is Swift"`,
                Go: `package main\n\nimport "fmt"\n\nfunc main() {\n    fmt.Println("Hello, World!")\n    \n    // Variable\n    var message string = "This is Go"\n    _ = message // Use variable to avoid error\n}`,
                Rust: `fn main() {\n    println!("Hello, World!");\n    \n    // Variable\n    let message = "This is Rust";\n}`,
                PHP: `<?php\necho "Hello, World!\\n";\n\n// Variable\n$message = "This is PHP";\n?>`,
                'C#': `using System;\n\npublic class HelloWorld\n{\n    public static void Main(string[] args)\n    {\n        Console.WriteLine ("Hello, World!");\n        \n        // Variable\n        string message = "This is C#";\n    }\n}`,
                Kotlin: `fun main() {\n    println("Hello, World!")\n    \n    // Variable\n    val message = "This is Kotlin"\n}`,
                Scala: `object HelloWorld {\n    def main(args: Array[String]): Unit = {\n        println("Hello, World!")\n        \n        // Variable\n        val message = "This is Scala"\n    }\n}`,
                Haskell: `main :: IO ()\nmain = putStrLn "Hello, World!"\n\n-- Variable (Constants are common)\nmessage :: String\nmessage = "This is Haskell"`,
                Lisp: `(format t "Hello, World!~%")\n\n; Variable (using Common Lisp syntax)\n(defparameter *message* "This is Lisp")`,
                Assembly: `; Assembly varies greatly by architecture\n; Example NASM syntax for Linux x86-64 Hello World\n\nsection .data\n    msg db 'Hello, World!', 0xa ; String and newline\n    len equ $ - msg          ; Length of string\n\nsection .text\n    global _start\n\n_start:\n    ; write(1, msg, len)\n    mov rax, 1       ; system call number (sys_write)\n    mov rdi, 1       ; file descriptor 1 (stdout)\n    mov rsi, msg     ; address of string to write\n    mov rdx, len     ; number of bytes\n    syscall          ; invoke kernel\n\n    ; exit(0)\n    mov rax, 60      ; system call number (sys_exit)\n    xor rdi, rdi     ; exit code 0\n    syscall          ; invoke kernel`,
                'Algol 60': `begin\n    comment Hello World for Algol 60;\n    outstring(1, "Hello, World!");\n    newline(1);\n\n    comment Variable example;\n    string message;\n    message := "This is Algol 60";\n    outstring(1, message);\n    newline(1);\nend`,
                'Objective-C': `#import <Foundation/Foundation.h>\n\nint main(int argc, const char * argv[]) {\n    @autoreleasepool {\n        NSLog(@"Hello, World!");\n        \n        // Variable\n        NSString *message = @"This is Objective-C";\n        NSLog(@"%@", message);\n    }\n    return 0;\n}`,
                Perl: `use strict;\nuse warnings;\n\nprint "Hello, World!\\n";\n\n# Variable\nmy $message = "This is Perl";\nprint "$message\\n";`,
                Awk: `BEGIN {\n    print "Hello, World!"\n    \n    # Variable\n    message = "This is Awk"\n    print message\n}`,
                D: `import std.stdio;\n\nvoid main() {\n    writeln("Hello, World!");\n\n    // Variable\n    string message = "This is D";\n    writeln(message);\n}`,
                Zig: `const std = @import("std");\n\npub fn main() !void {\n    const stdout = std.io.getStdOut().writer();\n    try stdout.print("Hello, World!\\n", .{});\n\n    // Variable\n    const message = "This is Zig";\n    try stdout.print("{s}\\n", .{message});\n}`,
                Odin: `package main\n\nimport "core:fmt"\n\nmain :: proc() {\n    fmt.println("Hello, World!")\n\n    // Variable\n    message: string = "This is Odin"\n    fmt.println(message)\n}`,
                V: `fn main() {\n    println('Hello, World!')\n\n    // Variable\n    message := 'This is V'\n    println(message)\n}`,
                Dart: `void main() {\n  print('Hello, World!');\n\n  // Variable\n  var message = 'This is Dart';\n  print(message);\n}`,
                TypeScript: `console.log("Hello, World!");\n\n// Variable\nlet message: string = "This is TypeScript";\nconsole.log(message);`,
                ML: `(* Standard ML syntax for ML Family *)\nprint "Hello, World!\\n";\n\n(* Variable *)\nval message = "This is ML (via SML)";\nprint (message ^ "\\n");`,
                'Standard ML': `print "Hello, World!\\n";\n\n(* Variable *)\nval message = "This is Standard ML";\nprint (message ^ "\\n");`,
                OCaml: `let () = print_endline "Hello, World!"\n\n(* Variable *)\nlet message = "This is OCaml"\nlet () = print_endline message`,
                'F#': `printfn "Hello, World!"\n\n// Variable\nlet message = "This is F#"\nprintfn "%s" message`,
                Nim: `echo "Hello, World!"\n\n# Variable\nvar message: string = "This is Nim"\necho message`,
                Julia: `println("Hello, World!")\n\n# Variable\nmessage = "This is Julia"\nprintln(message)`,
                Pascal: `program HelloWorld;\nvar\n  message: string;\nbegin\n  WriteLn('Hello, World!');\n  message := 'This is Pascal';\n  WriteLn(message);\nend.`,
                'Modula-2': `MODULE HelloWorld;\nFROM InOut IMPORT WriteString, WriteLn;\nVAR\n  message: ARRAY [0..20] OF CHAR;\nBEGIN\n  WriteString("Hello, World!");\n  WriteLn;\n  message := "This is Modula-2";\n  WriteString(message);\n  WriteLn;\nEND HelloWorld.`,
                ABC: `WRITE "Hello, World!" /\n\n-- Variable\nPUT "This is ABC" IN message\nWRITE message /`,
                Ada: `with Ada.Text_IO; use Ada.Text_IO;\nprocedure Hello is\n   Message : String := "This is Ada";\nbegin\n   Put_Line ("Hello, World!");\n   Put_Line (Message);\nend Hello;`,
                Oberon: `MODULE HelloWorld;\nIMPORT Out;\nVAR\n  message: ARRAY 32 OF CHAR;\nBEGIN\n  Out.String("Hello, World!"); Out.Ln;\n  message := "This is Oberon";\n  Out.String(message); Out.Ln;\nEND HelloWorld.`,
                Scheme: `(display "Hello, World!")\n(newline)\n\n; Variable\n(define message "This is Scheme")\n(display message)\n(newline)`,
                'Common Lisp': `(format t "Hello, World!~%")\n\n; Variable\n(defvar *my-message* "This is Common Lisp")\n(format t "~a~%" *my-message*)`,
                Clojure: `(println "Hello, World!")\n\n; Variable\n(def message "This is Clojure")\n(println message)`,
                Racket: `#lang racket\n(displayln "Hello, World!")\n\n; Variable\n(define message "This is Racket")\n(displayln message)`,
                Lua: `print("Hello, World!")\n\n-- Variable\nlocal message = "This is Lua"\nprint(message)`,
                Simula: `Begin\n    OutText("Hello, World!");\n    OutImage;\n    ! Variable;\n    Text T;\n    T :- "This is Simula";\n    OutText(T);\n    OutImage;\nEnd;`,
                Smalltalk: `Transcript show: 'Hello, World!'; cr.\n\n"Variable"\n| message |\nmessage := 'This is Smalltalk'.\nTranscript show: message; cr.`,
                Elixir: `IO.puts "Hello, World!"\n\n# Variable\nmessage = "This is Elixir"\nIO.puts message`,
                Prolog: `:- initialization(main).\nmain :-\n  write('Hello, World!'), nl,\n  Message = 'This is Prolog', % Variable-like usage\n  write(Message), nl.`,
                Erlang: `-module(hello).\n-export([start/0]).\n\nstart() ->\n    io:fwrite("Hello, World!~n"),\n    Message = "This is Erlang",\n    io:fwrite(Message ++ "~n").`,
                Fortran: `program hello\n  implicit none\n  character(len=30) :: message\n  print *, "Hello, World!"\n  message = "This is Fortran"\n  print *, message\nend program hello`,
                SQL: `SELECT 'Hello, World!' AS Greeting;\n\n-- Variables are dialect-specific.\n-- Example for display:\n-- DECLARE @message VARCHAR(50) = 'This is SQL'; SELECT @message; -- (T-SQL)
-- SET @message = 'This is SQL'; -- (MySQL user variable, conceptual)
`,
                S: `# S language example (often run in R)\nprint("Hello, World!")\n\n# Variable\nmessage <- "This is S (via R syntax)"\nprint(message)`,
                MATLAB: `disp('Hello, World!');\n\n% Variable\nmessage = 'This is MATLAB';\ndisp(message);`,
                SAS: `DATA _NULL_;\n    PUT "Hello, World!";\n    /* Variable */\n    length message $ 20;\n    message = "This is SAS";\n    PUT message;\nRUN;`,
                Stata: `display "Hello, World!"\n\n* Variable (Stata uses macros for this kind of string)\nlocal message "This is Stata"\ndisplay "\`message'"`,
                R: `print("Hello, World!")\n\n# Variable\nmessage <- "This is R"\nprint(message)`,
                APL: `'Hello, World!'\n\n⍝ Variable\nmessage ← 'This is APL'\nmessage`,
                J: `'Hello, World!' NB. Output directly\n\nNB. Variable\nmessage =: 'This is J'\nmessage`,
                'Thompson sh': `# Thompson sh (Ken Thompson's original shell)\n# This uses Bourne-like syntax for modern representation\necho "Hello, World!"\n\n# Variables\nmessage="This is Thompson sh"\necho "$message"`,
                'Bourne sh': `echo "Hello, World!"\n\n# Variable\nmessage="This is Bourne sh"\necho "$message"`,
                Bash: `echo "Hello, World!"\n\n# Variable\nmessage="This is Bash"\necho "$message"`,
                Zsh: `echo "Hello, World!"\n\n# Variable\nmessage="This is Zsh"\necho "$message"`,
                PowerShell: `Write-Host "Hello, World!"\n\n# Variable\n$message = "This is PowerShell"\nWrite-Host $message`,
                CPL: `(* CPL (Combined Programming Language) *)\n(* Precursor to BCPL. Exact 'Hello World' hard to pin down. *)\n(* Conceptual example based on influences: *)\nWRITESTRING("Hello, World!")\nLET Message = "This is CPL"`,
                BCPL: `GET "libhdr.h"\n\nLET START () BE\n$(\n    WRITES ("Hello, World!*N")\n\n    // Variable\n    LET message = "This is BCPL"\n    WRITES (message)\n    WRITES ("*N")\n$)`,
                B: `/* B Language Example (precursor to C) */\nmain() {\n  extrn putstr; /* Assumed library function */\n  putstr("Hello, World!*n"); /* *n for newline in some B versions */\n\n  /* Variable (auto on stack) */\n  auto message[20]; \n  /* String assignment was manual, char by char, or via a function */\n  /* For example: message = "This is B" (conceptual) */\n}`,
                Crystal: `puts "Hello, World!"\n\n# Variable\nmessage = "This is Crystal"\nputs message`,
                Vale: `import printutils.*; // Or similar for print\n\nexported func main() {\n  print("Hello, World!\\n");\n  let message = "This is Vale";\n  print(message + "\\n");\n}`,
                Carbon: `// Carbon Language (Experimental)\npackage Main api;\n\nfn Main() -> i32 {\n  Print("Hello, World!");\n  var message: String = "This is Carbon";\n  Print(message);\n  return 0;\n}`,
                Mojo: `# Mojo 🔥\nfn main():\n    print("Hello, World!")\n\n    # Variable\n    var message = "This is Mojo"\n    print(message)`,
                COBOL: `       IDENTIFICATION DIVISION.\n       PROGRAM-ID. HELLOWORLD.\n       DATA DIVISION.\n       WORKING-STORAGE SECTION.\n       01 WS-MESSAGE PIC X(30) VALUE "This is COBOL".\n       PROCEDURE DIVISION.\n           DISPLAY "Hello, World!".\n           DISPLAY WS-MESSAGE.\n           STOP RUN.`,
            };
            const rankLegend = {
                5: 'Excellent',
                4: 'Strong',
                3: 'Competent',
                2: 'Limited',
                1: 'Rare',
            };
            const languageRankingsData = {
                /* Omitted for brevity, same as before */
                Python: {
                    ML: 5,
                    Perf: 2,
                    Ease: 5,
                    Web: 4,
                    Sys: 2,
                    Script: 5,
                    Mob: 3,
                    Emb: 1,
                    Viz: 5,
                    Conc: 3,
                    Func: 3,
                    Game: 3,
                    DevOps: 4,
                    UI: 3,
                    Back: 5,
                    Front: 2,
                    Cloud: 4,
                    Tool: 4,
                    Teach: 5,
                    AI: 5,
                    Fin: 5,
                    Sci: 5,
                    Ent: 4,
                    RT: 2,
                    Sec: 3,
                },
                JavaScript: {
                    ML: 3,
                    Perf: 2,
                    Ease: 4,
                    Web: 5,
                    Sys: 2,
                    Script: 4,
                    Mob: 3,
                    Emb: 1,
                    Viz: 3,
                    Conc: 3,
                    Func: 2,
                    Game: 3,
                    DevOps: 4,
                    UI: 5,
                    Back: 5,
                    Front: 5,
                    Cloud: 4,
                    Tool: 4,
                    Teach: 4,
                    AI: 3,
                    Fin: 3,
                    Sci: 3,
                    Ent: 4,
                    RT: 2,
                    Sec: 3,
                },
                'C++': {
                    ML: 3,
                    Perf: 5,
                    Ease: 2,
                    Web: 3,
                    Sys: 5,
                    Script: 2,
                    Mob: 2,
                    Emb: 5,
                    Viz: 3,
                    Conc: 4,
                    Func: 3,
                    Game: 5,
                    DevOps: 3,
                    UI: 3,
                    Back: 4,
                    Front: 3,
                    Cloud: 3,
                    Tool: 4,
                    Teach: 2,
                    AI: 3,
                    Fin: 4,
                    Sci: 4,
                    Ent: 4,
                    RT: 5,
                    Sec: 3,
                },
                Java: {
                    ML: 3,
                    Perf: 4,
                    Ease: 3,
                    Web: 4,
                    Sys: 4,
                    Script: 3,
                    Mob: 4,
                    Emb: 3,
                    Viz: 3,
                    Conc: 4,
                    Func: 3,
                    Game: 4,
                    DevOps: 4,
                    UI: 3,
                    Back: 5,
                    Front: 4,
                    Cloud: 4,
                    Tool: 4,
                    Teach: 3,
                    AI: 3,
                    Fin: 4,
                    Sci: 4,
                    Ent: 5,
                    RT: 4,
                    Sec: 4,
                },
                Go: {
                    ML: 3,
                    Perf: 4,
                    Ease: 3,
                    Web: 4,
                    Sys: 4,
                    Script: 3,
                    Mob: 2,
                    Emb: 3,
                    Viz: 2,
                    Conc: 4,
                    Func: 2,
                    Game: 3,
                    DevOps: 5,
                    UI: 2,
                    Back: 5,
                    Front: 3,
                    Cloud: 5,
                    Tool: 4,
                    Teach: 3,
                    AI: 3,
                    Fin: 3,
                    Sci: 3,
                    Ent: 4,
                    RT: 4,
                    Sec: 4,
                },
                Rust: {
                    ML: 3,
                    Perf: 5,
                    Ease: 2,
                    Web: 3,
                    Sys: 5,
                    Script: 2,
                    Mob: 2,
                    Emb: 4,
                    Viz: 2,
                    Conc: 5,
                    Func: 3,
                    Game: 4,
                    DevOps: 3,
                    UI: 2,
                    Back: 4,
                    Front: 3,
                    Cloud: 4,
                    Tool: 4,
                    Teach: 2,
                    AI: 3,
                    Fin: 3,
                    Sci: 4,
                    Ent: 3,
                    RT: 5,
                    Sec: 5,
                },
                R: {
                    ML: 5,
                    Perf: 1,
                    Ease: 3,
                    Web: 2,
                    Sys: 1,
                    Script: 3,
                    Mob: 1,
                    Emb: 1,
                    Viz: 5,
                    Conc: 2,
                    Func: 2,
                    Game: 2,
                    DevOps: 2,
                    UI: 2,
                    Back: 2,
                    Front: 1,
                    Cloud: 1,
                    Tool: 2,
                    Teach: 5,
                    AI: 4,
                    Fin: 4,
                    Sci: 5,
                    Ent: 2,
                    RT: 1,
                    Sec: 2,
                },
                TypeScript: {
                    ML: 3,
                    Perf: 2,
                    Ease: 4,
                    Web: 5,
                    Sys: 2,
                    Script: 4,
                    Mob: 3,
                    Emb: 1,
                    Viz: 3,
                    Conc: 3,
                    Func: 2,
                    Game: 3,
                    DevOps: 4,
                    UI: 5,
                    Back: 5,
                    Front: 5,
                    Cloud: 4,
                    Tool: 4,
                    Teach: 4,
                    AI: 3,
                    Fin: 3,
                    Sci: 3,
                    Ent: 4,
                    RT: 2,
                    Sec: 3,
                },
                'C#': {
                    ML: 3,
                    Perf: 4,
                    Ease: 3,
                    Web: 4,
                    Sys: 4,
                    Script: 3,
                    Mob: 4,
                    Emb: 3,
                    Viz: 3,
                    Conc: 4,
                    Func: 3,
                    Game: 4,
                    DevOps: 4,
                    UI: 4,
                    Back: 5,
                    Front: 4,
                    Cloud: 4,
                    Tool: 4,
                    Teach: 3,
                    AI: 3,
                    Fin: 4,
                    Sci: 4,
                    Ent: 5,
                    RT: 4,
                    Sec: 4,
                },
                Kotlin: {
                    ML: 3,
                    Perf: 3,
                    Ease: 4,
                    Web: 4,
                    Sys: 3,
                    Script: 3,
                    Mob: 5,
                    Emb: 2,
                    Viz: 2,
                    Conc: 3,
                    Func: 3,
                    Game: 3,
                    DevOps: 3,
                    UI: 4,
                    Back: 5,
                    Front: 4,
                    Cloud: 3,
                    Tool: 3,
                    Teach: 4,
                    AI: 3,
                    Fin: 3,
                    Sci: 3,
                    Ent: 4,
                    RT: 3,
                    Sec: 4,
                },
                Swift: {
                    ML: 3,
                    Perf: 3,
                    Ease: 4,
                    Web: 4,
                    Sys: 3,
                    Script: 3,
                    Mob: 5,
                    Emb: 2,
                    Viz: 2,
                    Conc: 3,
                    Func: 3,
                    Game: 3,
                    DevOps: 3,
                    UI: 5,
                    Back: 4,
                    Front: 4,
                    Cloud: 3,
                    Tool: 3,
                    Teach: 4,
                    AI: 3,
                    Fin: 3,
                    Sci: 3,
                    Ent: 4,
                    RT: 3,
                    Sec: 4,
                },
                PHP: {
                    ML: 2,
                    Perf: 2,
                    Ease: 3,
                    Web: 5,
                    Sys: 1,
                    Script: 3,
                    Mob: 2,
                    Emb: 1,
                    Viz: 2,
                    Conc: 2,
                    Func: 2,
                    Game: 2,
                    DevOps: 3,
                    UI: 4,
                    Back: 5,
                    Front: 5,
                    Cloud: 3,
                    Tool: 3,
                    Teach: 3,
                    AI: 2,
                    Fin: 2,
                    Sci: 2,
                    Ent: 4,
                    RT: 1,
                    Sec: 2,
                },
                Ruby: {
                    ML: 3,
                    Perf: 1,
                    Ease: 4,
                    Web: 4,
                    Sys: 1,
                    Script: 4,
                    Mob: 2,
                    Emb: 1,
                    Viz: 3,
                    Conc: 2,
                    Func: 3,
                    Game: 3,
                    DevOps: 4,
                    UI: 4,
                    Back: 5,
                    Front: 4,
                    Cloud: 3,
                    Tool: 4,
                    Teach: 4,
                    AI: 3,
                    Fin: 3,
                    Sci: 3,
                    Ent: 3,
                    RT: 1,
                    Sec: 2,
                },
                Scala: {
                    ML: 4,
                    Perf: 3,
                    Ease: 2,
                    Web: 4,
                    Sys: 4,
                    Script: 2,
                    Mob: 2,
                    Emb: 2,
                    Viz: 3,
                    Conc: 4,
                    Func: 4,
                    Game: 3,
                    DevOps: 3,
                    UI: 3,
                    Back: 4,
                    Front: 3,
                    Cloud: 3,
                    Tool: 3,
                    Teach: 3,
                    AI: 3,
                    Fin: 4,
                    Sci: 4,
                    Ent: 4,
                    RT: 3,
                    Sec: 4,
                },
                Haskell: {
                    ML: 3,
                    Perf: 2,
                    Ease: 1,
                    Web: 2,
                    Sys: 2,
                    Script: 2,
                    Mob: 1,
                    Emb: 1,
                    Viz: 2,
                    Conc: 4,
                    Func: 5,
                    Game: 2,
                    DevOps: 2,
                    UI: 2,
                    Back: 2,
                    Front: 1,
                    Cloud: 1,
                    Tool: 3,
                    Teach: 3,
                    AI: 3,
                    Fin: 3,
                    Sci: 3,
                    Ent: 2,
                    RT: 2,
                    Sec: 3,
                },
                Julia: {
                    ML: 5,
                    Perf: 3,
                    Ease: 3,
                    Web: 2,
                    Sys: 2,
                    Script: 2,
                    Mob: 1,
                    Emb: 1,
                    Viz: 4,
                    Conc: 3,
                    Func: 3,
                    Game: 3,
                    DevOps: 2,
                    UI: 2,
                    Back: 2,
                    Front: 1,
                    Cloud: 1,
                    Tool: 3,
                    Teach: 4,
                    AI: 4,
                    Fin: 4,
                    Sci: 5,
                    Ent: 2,
                    RT: 1,
                    Sec: 3,
                },
                Dart: {
                    ML: 2,
                    Perf: 3,
                    Ease: 3,
                    Web: 4,
                    Sys: 2,
                    Script: 3,
                    Mob: 5,
                    Emb: 2,
                    Viz: 2,
                    Conc: 3,
                    Func: 2,
                    Game: 3,
                    DevOps: 3,
                    UI: 4,
                    Back: 4,
                    Front: 4,
                    Cloud: 3,
                    Tool: 3,
                    Teach: 4,
                    AI: 3,
                    Fin: 2,
                    Sci: 2,
                    Ent: 3,
                    RT: 2,
                    Sec: 3,
                },
                SQL: {
                    ML: 3,
                    Perf: 1,
                    Ease: 3,
                    Web: 3,
                    Sys: 1,
                    Script: 2,
                    Mob: 1,
                    Emb: 1,
                    Viz: 2,
                    Conc: 1,
                    Func: 1,
                    Game: 1,
                    DevOps: 3,
                    UI: 1,
                    Back: 5,
                    Front: 2,
                    Cloud: 2,
                    Tool: 3,
                    Teach: 3,
                    AI: 3,
                    Fin: 5,
                    Sci: 4,
                    Ent: 5,
                    RT: 1,
                    Sec: 3,
                },
                Odin: {
                    ML: 1,
                    Perf: 4,
                    Ease: 2,
                    Web: 2,
                    Sys: 4,
                    Script: 2,
                    Mob: 1,
                    Emb: 3,
                    Viz: 1,
                    Conc: 3,
                    Func: 2,
                    Game: 2,
                    DevOps: 2,
                    UI: 2,
                    Back: 2,
                    Front: 2,
                    Cloud: 2,
                    Tool: 3,
                    Teach: 2,
                    AI: 2,
                    Fin: 2,
                    Sci: 2,
                    Ent: 2,
                    RT: 4,
                    Sec: 4,
                },
                Nim: {
                    ML: 2,
                    Perf: 4,
                    Ease: 3,
                    Web: 3,
                    Sys: 4,
                    Script: 3,
                    Mob: 2,
                    Emb: 3,
                    Viz: 2,
                    Conc: 3,
                    Func: 3,
                    Game: 3,
                    DevOps: 3,
                    UI: 2,
                    Back: 3,
                    Front: 3,
                    Cloud: 3,
                    Tool: 4,
                    Teach: 3,
                    AI: 2,
                    Fin: 2,
                    Sci: 3,
                    Ent: 3,
                    RT: 4,
                    Sec: 4,
                },
                D: {
                    ML: 3,
                    Perf: 4,
                    Ease: 2,
                    Web: 3,
                    Sys: 4,
                    Script: 2,
                    Mob: 2,
                    Emb: 3,
                    Viz: 2,
                    Conc: 4,
                    Func: 3,
                    Game: 4,
                    DevOps: 3,
                    UI: 2,
                    Back: 4,
                    Front: 3,
                    Cloud: 3,
                    Tool: 4,
                    Teach: 2,
                    AI: 2,
                    Fin: 3,
                    Sci: 4,
                    Ent: 3,
                    RT: 4,
                    Sec: 4,
                },
                Elixir: {
                    ML: 3,
                    Perf: 2,
                    Ease: 3,
                    Web: 4,
                    Sys: 2,
                    Script: 3,
                    Mob: 2,
                    Emb: 1,
                    Viz: 3,
                    Conc: 4,
                    Func: 3,
                    Game: 3,
                    DevOps: 4,
                    UI: 3,
                    Back: 5,
                    Front: 3,
                    Cloud: 4,
                    Tool: 3,
                    Teach: 3,
                    AI: 3,
                    Fin: 3,
                    Sci: 3,
                    Ent: 4,
                    RT: 2,
                    Sec: 3,
                },
                OCaml: {
                    ML: 3,
                    Perf: 3,
                    Ease: 2,
                    Web: 2,
                    Sys: 3,
                    Script: 2,
                    Mob: 1,
                    Emb: 1,
                    Viz: 2,
                    Conc: 3,
                    Func: 4,
                    Game: 2,
                    DevOps: 2,
                    UI: 2,
                    Back: 2,
                    Front: 1,
                    Cloud: 1,
                    Tool: 3,
                    Teach: 3,
                    AI: 3,
                    Fin: 3,
                    Sci: 3,
                    Ent: 2,
                    RT: 2,
                    Sec: 3,
                },
                Lisp: {
                    ML: 3,
                    Perf: 2,
                    Ease: 2,
                    Web: 2,
                    Sys: 2,
                    Script: 2,
                    Mob: 1,
                    Emb: 1,
                    Viz: 2,
                    Conc: 3,
                    Func: 4,
                    Game: 2,
                    DevOps: 2,
                    UI: 2,
                    Back: 2,
                    Front: 1,
                    Cloud: 1,
                    Tool: 3,
                    Teach: 3,
                    AI: 4,
                    Fin: 3,
                    Sci: 3,
                    Ent: 2,
                    RT: 2,
                    Sec: 3,
                },
                Zig: {
                    ML: 2,
                    Perf: 5,
                    Ease: 2,
                    Web: 2,
                    Sys: 5,
                    Script: 2,
                    Mob: 1,
                    Emb: 4,
                    Viz: 1,
                    Conc: 4,
                    Func: 2,
                    Game: 3,
                    DevOps: 3,
                    UI: 2,
                    Back: 3,
                    Front: 2,
                    Cloud: 4,
                    Tool: 4,
                    Teach: 2,
                    AI: 2,
                    Fin: 2,
                    Sci: 2,
                    Ent: 2,
                    RT: 5,
                    Sec: 5,
                },
                Assembly: {
                    ML: 1,
                    Perf: 5,
                    Ease: 1,
                    Web: 1,
                    Sys: 5,
                    Script: 1,
                    Mob: 1,
                    Emb: 5,
                    Viz: 1,
                    Conc: 5,
                    Func: 1,
                    Game: 3,
                    DevOps: 1,
                    UI: 1,
                    Back: 1,
                    Front: 1,
                    Cloud: 1,
                    Tool: 3,
                    Teach: 1,
                    AI: 1,
                    Fin: 2,
                    Sci: 2,
                    Ent: 1,
                    RT: 5,
                    Sec: 3,
                },
                V: {
                    ML: 2,
                    Perf: 4,
                    Ease: 2,
                    Web: 3,
                    Sys: 4,
                    Script: 2,
                    Mob: 2,
                    Emb: 3,
                    Viz: 1,
                    Conc: 3,
                    Func: 2,
                    Game: 3,
                    DevOps: 3,
                    UI: 2,
                    Back: 3,
                    Front: 3,
                    Cloud: 3,
                    Tool: 4,
                    Teach: 2,
                    AI: 2,
                    Fin: 2,
                    Sci: 2,
                    Ent: 3,
                    RT: 4,
                    Sec: 4,
                },
                Bash: {
                    ML: 1,
                    Perf: 1,
                    Ease: 3,
                    Web: 2,
                    Sys: 1,
                    Script: 5,
                    Mob: 1,
                    Emb: 1,
                    Viz: 1,
                    Conc: 1,
                    Func: 1,
                    Game: 1,
                    DevOps: 5,
                    UI: 1,
                    Back: 3,
                    Front: 1,
                    Cloud: 3,
                    Tool: 3,
                    Teach: 4,
                    AI: 1,
                    Fin: 1,
                    Sci: 1,
                    Ent: 2,
                    RT: 1,
                    Sec: 2,
                },
                PowerShell: {
                    ML: 1,
                    Perf: 1,
                    Ease: 3,
                    Web: 2,
                    Sys: 1,
                    Script: 5,
                    Mob: 1,
                    Emb: 1,
                    Viz: 1,
                    Conc: 1,
                    Func: 1,
                    Game: 1,
                    DevOps: 5,
                    UI: 1,
                    Back: 3,
                    Front: 1,
                    Cloud: 3,
                    Tool: 3,
                    Teach: 4,
                    AI: 1,
                    Fin: 1,
                    Sci: 1,
                    Ent: 4,
                    RT: 1,
                    Sec: 2,
                },
                Perl: {
                    ML: 2,
                    Perf: 2,
                    Ease: 2,
                    Web: 3,
                    Sys: 1,
                    Script: 4,
                    Mob: 1,
                    Emb: 1,
                    Viz: 2,
                    Conc: 2,
                    Func: 2,
                    Game: 2,
                    DevOps: 4,
                    UI: 1,
                    Back: 3,
                    Front: 2,
                    Cloud: 3,
                    Tool: 3,
                    Teach: 3,
                    AI: 2,
                    Fin: 2,
                    Sci: 2,
                    Ent: 3,
                    RT: 1,
                    Sec: 2,
                },
                Lua: {
                    ML: 2,
                    Perf: 2,
                    Ease: 3,
                    Web: 3,
                    Sys: 1,
                    Script: 4,
                    Mob: 2,
                    Emb: 2,
                    Viz: 2,
                    Conc: 2,
                    Func: 2,
                    Game: 5,
                    DevOps: 3,
                    UI: 2,
                    Back: 3,
                    Front: 3,
                    Cloud: 3,
                    Tool: 3,
                    Teach: 4,
                    AI: 2,
                    Fin: 3,
                    Sci: 2,
                    Ent: 2,
                    RT: 2,
                    Sec: 2,
                },
                MATLAB: {
                    ML: 5,
                    Perf: 2,
                    Ease: 2,
                    Web: 1,
                    Sys: 1,
                    Script: 2,
                    Mob: 1,
                    Emb: 1,
                    Viz: 5,
                    Conc: 2,
                    Func: 2,
                    Game: 2,
                    DevOps: 1,
                    UI: 2,
                    Back: 1,
                    Front: 1,
                    Cloud: 1,
                    Tool: 2,
                    Teach: 4,
                    AI: 4,
                    Fin: 4,
                    Sci: 5,
                    Ent: 2,
                    RT: 1,
                    Sec: 2,
                },
                SAS: {
                    ML: 4,
                    Perf: 1,
                    Ease: 1,
                    Web: 1,
                    Sys: 1,
                    Script: 2,
                    Mob: 1,
                    Emb: 1,
                    Viz: 3,
                    Conc: 1,
                    Func: 1,
                    Game: 1,
                    DevOps: 1,
                    UI: 1,
                    Back: 1,
                    Front: 1,
                    Cloud: 1,
                    Tool: 2,
                    Teach: 3,
                    AI: 3,
                    Fin: 5,
                    Sci: 5,
                    Ent: 3,
                    RT: 1,
                    Sec: 2,
                },
                Stata: {
                    ML: 4,
                    Perf: 1,
                    Ease: 1,
                    Web: 1,
                    Sys: 1,
                    Script: 2,
                    Mob: 1,
                    Emb: 1,
                    Viz: 3,
                    Conc: 1,
                    Func: 1,
                    Game: 1,
                    DevOps: 1,
                    UI: 1,
                    Back: 1,
                    Front: 1,
                    Cloud: 1,
                    Tool: 2,
                    Teach: 3,
                    AI: 3,
                    Fin: 5,
                    Sci: 5,
                    Ent: 2,
                    RT: 1,
                    Sec: 2,
                },
                'Objective-C': {
                    ML: 2,
                    Perf: 2,
                    Ease: 2,
                    Web: 3,
                    Sys: 3,
                    Script: 2,
                    Mob: 5,
                    Emb: 2,
                    Viz: 2,
                    Conc: 3,
                    Func: 2,
                    Game: 3,
                    DevOps: 3,
                    UI: 5,
                    Back: 4,
                    Front: 4,
                    Cloud: 3,
                    Tool: 3,
                    Teach: 3,
                    AI: 2,
                    Fin: 3,
                    Sci: 3,
                    Ent: 4,
                    RT: 3,
                    Sec: 4,
                },
                'F#': {
                    ML: 3,
                    Perf: 3,
                    Ease: 2,
                    Web: 3,
                    Sys: 3,
                    Script: 2,
                    Mob: 1,
                    Emb: 1,
                    Viz: 2,
                    Conc: 3,
                    Func: 4,
                    Game: 2,
                    DevOps: 3,
                    UI: 2,
                    Back: 3,
                    Front: 2,
                    Cloud: 2,
                    Tool: 3,
                    Teach: 3,
                    AI: 3,
                    Fin: 3,
                    Sci: 3,
                    Ent: 3,
                    RT: 2,
                    Sec: 3,
                },
                Erlang: {
                    ML: 2,
                    Perf: 2,
                    Ease: 2,
                    Web: 3,
                    Sys: 2,
                    Script: 2,
                    Mob: 1,
                    Emb: 1,
                    Viz: 2,
                    Conc: 5,
                    Func: 3,
                    Game: 2,
                    DevOps: 4,
                    UI: 1,
                    Back: 4,
                    Front: 2,
                    Cloud: 4,
                    Tool: 3,
                    Teach: 2,
                    AI: 2,
                    Fin: 2,
                    Sci: 2,
                    Ent: 4,
                    RT: 2,
                    Sec: 3,
                },
                Clojure: {
                    ML: 3,
                    Perf: 2,
                    Ease: 2,
                    Web: 3,
                    Sys: 2,
                    Script: 2,
                    Mob: 1,
                    Emb: 1,
                    Viz: 2,
                    Conc: 3,
                    Func: 5,
                    Game: 2,
                    DevOps: 3,
                    UI: 2,
                    Back: 3,
                    Front: 2,
                    Cloud: 2,
                    Tool: 3,
                    Teach: 3,
                    AI: 3,
                    Fin: 3,
                    Sci: 3,
                    Ent: 2,
                    RT: 2,
                    Sec: 3,
                },
                Prolog: {
                    ML: 3,
                    Perf: 1,
                    Ease: 1,
                    Web: 1,
                    Sys: 1,
                    Script: 1,
                    Mob: 1,
                    Emb: 1,
                    Viz: 1,
                    Conc: 1,
                    Func: 1,
                    Game: 1,
                    DevOps: 1,
                    UI: 1,
                    Back: 1,
                    Front: 1,
                    Cloud: 1,
                    Tool: 2,
                    Teach: 4,
                    AI: 5,
                    Fin: 2,
                    Sci: 2,
                    Ent: 1,
                    RT: 1,
                    Sec: 2,
                },
                Scheme: {
                    ML: 3,
                    Perf: 1,
                    Ease: 2,
                    Web: 1,
                    Sys: 1,
                    Script: 2,
                    Mob: 1,
                    Emb: 1,
                    Viz: 1,
                    Conc: 2,
                    Func: 4,
                    Game: 1,
                    DevOps: 1,
                    UI: 1,
                    Back: 1,
                    Front: 1,
                    Cloud: 1,
                    Tool: 2,
                    Teach: 4,
                    AI: 4,
                    Fin: 2,
                    Sci: 2,
                    Ent: 1,
                    RT: 1,
                    Sec: 2,
                },
                Racket: {
                    ML: 3,
                    Perf: 1,
                    Ease: 2,
                    Web: 1,
                    Sys: 1,
                    Script: 2,
                    Mob: 1,
                    Emb: 1,
                    Viz: 1,
                    Conc: 2,
                    Func: 4,
                    Game: 1,
                    DevOps: 1,
                    UI: 1,
                    Back: 1,
                    Front: 1,
                    Cloud: 1,
                    Tool: 2,
                    Teach: 4,
                    AI: 4,
                    Fin: 2,
                    Sci: 2,
                    Ent: 1,
                    RT: 1,
                    Sec: 2,
                },
                APL: {
                    ML: 2,
                    Perf: 2,
                    Ease: 1,
                    Web: 1,
                    Sys: 1,
                    Script: 1,
                    Mob: 1,
                    Emb: 1,
                    Viz: 2,
                    Conc: 1,
                    Func: 1,
                    Game: 1,
                    DevOps: 1,
                    UI: 1,
                    Back: 1,
                    Front: 1,
                    Cloud: 1,
                    Tool: 2,
                    Teach: 3,
                    AI: 3,
                    Fin: 3,
                    Sci: 4,
                    Ent: 1,
                    RT: 1,
                    Sec: 2,
                },
                J: {
                    ML: 2,
                    Perf: 2,
                    Ease: 1,
                    Web: 1,
                    Sys: 1,
                    Script: 1,
                    Mob: 1,
                    Emb: 1,
                    Viz: 2,
                    Conc: 1,
                    Func: 1,
                    Game: 1,
                    DevOps: 1,
                    UI: 1,
                    Back: 1,
                    Front: 1,
                    Cloud: 1,
                    Tool: 2,
                    Teach: 3,
                    AI: 3,
                    Fin: 3,
                    Sci: 4,
                    Ent: 1,
                    RT: 1,
                    Sec: 2,
                },
                Zsh: {
                    ML: 1,
                    Perf: 1,
                    Ease: 3,
                    Web: 2,
                    Sys: 1,
                    Script: 5,
                    Mob: 1,
                    Emb: 1,
                    Viz: 1,
                    Conc: 1,
                    Func: 1,
                    Game: 1,
                    DevOps: 5,
                    UI: 1,
                    Back: 3,
                    Front: 1,
                    Cloud: 3,
                    Tool: 3,
                    Teach: 4,
                    AI: 1,
                    Fin: 1,
                    Sci: 1,
                    Ent: 2,
                    RT: 1,
                    Sec: 2,
                },
            };
            const categoryShortToFullName = {
                ML: 'Machine Learning',
                Perf: 'Performance',
                Ease: 'Ease of Use',
                Web: 'Web Dev',
                Sys: 'System Prog.',
                Script: 'Scripting',
                Mob: 'Mobile Dev',
                Emb: 'Embedded',
                Viz: 'Visualization',
                Conc: 'Concurrency',
                Func: 'Functional Prog.',
                Game: 'Game Dev',
                DevOps: 'DevOps',
                UI: 'UI Dev',
                Back: 'Backend Dev',
                Front: 'Frontend Dev',
                Cloud: 'Cloud Dev',
                Tool: 'Tooling',
                Teach: 'Teaching',
                AI: 'AI (General)',
                Fin: 'Finance',
                Sci: 'Scientific Computing',
                Ent: 'Enterprise Dev',
                RT: 'Real-Time Systems',
                Sec: 'Security',
            };
            const categoriesOrder = [
                'ML',
                'AI',
                'Sci',
                'Fin',
                'Viz',
                'Perf',
                'Ease',
                'Web',
                'Back',
                'Front',
                'Mob',
                'Game',
                'Sys',
                'Emb',
                'Conc',
                'Func',
                'Script',
                'DevOps',
                'Cloud',
                'Tool',
                'Teach',
                'Ent',
                'RT',
                'Sec',
            ];

            let network = null;
            let allNodesOriginalStyles = new Map();
            let nodesDataSet = new vis.DataSet();

            function DrawGraph() {
                const graphContainer =
                    document.getElementById('graphContainer');
                const container = document.getElementById('languageGraph');
                const loadingMessage =
                    document.getElementById('loadingMessage');
                const sidebar = document.getElementById('sidebar');
                const closeSidebarButton =
                    document.getElementById('closeSidebar');
                const sidebarTitle = document.getElementById('sidebarTitle');
                const languageTagsList =
                    document.getElementById('languageTagsList');
                const influencedByList =
                    document.getElementById('influencedByList');
                const influencesList =
                    document.getElementById('influencesList');
                const rankingsList = document.getElementById('rankingsList');
                const syntaxExample = document.getElementById('syntaxExample');
                const rankingsHeader =
                    document.getElementById('rankingsHeader');
                const rankingsToggleArrow =
                    rankingsHeader.querySelector('.toggle-arrow');

                const initialNodesData = [
                    /* Omitted for brevity, same as before */
                    {
                        id: 'Assembly',
                        label: 'Assembly',
                        group: 'misc',
                        shape: 'box',
                    },
                    {
                        id: 'Python',
                        label: 'Python',
                        group: 'misc',
                        shape: 'box',
                    },
                    {
                        id: 'Algol 60',
                        label: 'Algol 60',
                        group: 'c_syntax_algol',
                        shape: 'box',
                    },
                    {
                        id: 'C',
                        label: 'C',
                        group: 'c_syntax_core',
                        shape: 'box',
                    },
                    {
                        id: 'C++',
                        label: 'C++',
                        group: 'c_syntax_core',
                        shape: 'box',
                    },
                    {
                        id: 'Objective-C',
                        label: 'Objective-C',
                        group: 'c_syntax_core',
                        shape: 'box',
                    },
                    {
                        id: 'Perl',
                        label: 'Perl',
                        group: 'c_syntax_script',
                        shape: 'box',
                    },
                    {
                        id: 'Awk',
                        label: 'Awk',
                        group: 'c_syntax_script',
                        shape: 'box',
                    },
                    {
                        id: 'JavaScript',
                        label: 'JavaScript',
                        group: 'c_syntax_script',
                        shape: 'box',
                    },
                    {
                        id: 'PHP',
                        label: 'PHP',
                        group: 'c_syntax_script',
                        shape: 'box',
                    },
                    {
                        id: 'Java',
                        label: 'Java',
                        group: 'c_syntax_jvm',
                        shape: 'box',
                    },
                    {
                        id: 'D',
                        label: 'D',
                        group: 'c_syntax_modern',
                        shape: 'box',
                    },
                    {
                        id: 'Rust',
                        label: 'Rust',
                        group: 'c_syntax_modern',
                        shape: 'box',
                    },
                    {
                        id: 'Go',
                        label: 'Go',
                        group: 'c_syntax_modern',
                        shape: 'box',
                    },
                    {
                        id: 'Zig',
                        label: 'Zig',
                        group: 'c_syntax_modern',
                        shape: 'box',
                    },
                    {
                        id: 'Odin',
                        label: 'Odin',
                        group: 'c_syntax_modern',
                        shape: 'box',
                    },
                    {
                        id: 'V',
                        label: 'V',
                        group: 'c_syntax_modern',
                        shape: 'box',
                    },
                    {
                        id: 'Swift',
                        label: 'Swift',
                        group: 'c_syntax_modern',
                        shape: 'box',
                    },
                    {
                        id: 'C#',
                        label: 'C#',
                        group: 'c_syntax_jvm',
                        shape: 'box',
                    },
                    {
                        id: 'Kotlin',
                        label: 'Kotlin',
                        group: 'c_syntax_jvm',
                        shape: 'box',
                    },
                    {
                        id: 'Scala',
                        label: 'Scala',
                        group: 'c_syntax_jvm',
                        shape: 'box',
                    },
                    {
                        id: 'Dart',
                        label: 'Dart',
                        group: 'c_syntax_script',
                        shape: 'box',
                    },
                    {
                        id: 'TypeScript',
                        label: 'TypeScript',
                        group: 'c_syntax_script',
                        shape: 'box',
                    },
                    { id: 'ML', label: 'ML', group: 'ml', shape: 'box' },
                    {
                        id: 'Standard ML',
                        label: 'Standard ML',
                        group: 'ml',
                        shape: 'box',
                    },
                    {
                        id: 'Haskell',
                        label: 'Haskell',
                        group: 'ml',
                        shape: 'box',
                    },
                    { id: 'OCaml', label: 'OCaml', group: 'ml', shape: 'box' },
                    { id: 'F#', label: 'F#', group: 'ml', shape: 'box' },
                    { id: 'Nim', label: 'Nim', group: 'ml', shape: 'box' },
                    {
                        id: 'Julia',
                        label: 'Julia',
                        group: 'stats',
                        shape: 'box',
                    },
                    {
                        id: 'Pascal',
                        label: 'Pascal',
                        group: 'pascal_like',
                        shape: 'box',
                    },
                    {
                        id: 'Modula-2',
                        label: 'Modula-2',
                        group: 'pascal_like',
                        shape: 'box',
                    },
                    {
                        id: 'ABC',
                        label: 'ABC',
                        group: 'pascal_like',
                        shape: 'box',
                    },
                    {
                        id: 'Ada',
                        label: 'Ada',
                        group: 'pascal_like',
                        shape: 'box',
                    },
                    {
                        id: 'Oberon',
                        label: 'Oberon',
                        group: 'pascal_like',
                        shape: 'box',
                    },
                    { id: 'Lisp', label: 'Lisp', group: 'lisp', shape: 'box' },
                    {
                        id: 'Scheme',
                        label: 'Scheme',
                        group: 'lisp',
                        shape: 'box',
                    },
                    {
                        id: 'Common Lisp',
                        label: 'Common Lisp',
                        group: 'lisp',
                        shape: 'box',
                    },
                    {
                        id: 'Clojure',
                        label: 'Clojure',
                        group: 'lisp',
                        shape: 'box',
                    },
                    {
                        id: 'Racket',
                        label: 'Racket',
                        group: 'lisp',
                        shape: 'box',
                    },
                    {
                        id: 'Lua',
                        label: 'Lua',
                        group: 'c_syntax_script',
                        shape: 'box',
                    },
                    {
                        id: 'Simula',
                        label: 'Simula',
                        group: 'smalltalk',
                        shape: 'box',
                    },
                    {
                        id: 'Smalltalk',
                        label: 'Smalltalk',
                        group: 'smalltalk',
                        shape: 'box',
                    },
                    {
                        id: 'Ruby',
                        label: 'Ruby',
                        group: 'smalltalk',
                        shape: 'box',
                    },
                    {
                        id: 'Elixir',
                        label: 'Elixir',
                        group: 'logic',
                        shape: 'box',
                    },
                    {
                        id: 'Prolog',
                        label: 'Prolog',
                        group: 'logic',
                        shape: 'box',
                    },
                    {
                        id: 'Erlang',
                        label: 'Erlang',
                        group: 'logic',
                        shape: 'box',
                    },
                    {
                        id: 'Fortran',
                        label: 'Fortran',
                        group: 'stats',
                        shape: 'box',
                    },
                    { id: 'SQL', label: 'SQL', group: 'misc', shape: 'box' },
                    { id: 'S', label: 'S', group: 'stats', shape: 'box' },
                    {
                        id: 'MATLAB',
                        label: 'MATLAB',
                        group: 'stats',
                        shape: 'box',
                    },
                    { id: 'SAS', label: 'SAS', group: 'stats', shape: 'box' },
                    {
                        id: 'Stata',
                        label: 'Stata',
                        group: 'stats',
                        shape: 'box',
                    },
                    { id: 'R', label: 'R', group: 'stats', shape: 'box' },
                    { id: 'APL', label: 'APL', group: 'array', shape: 'box' },
                    { id: 'J', label: 'J', group: 'array', shape: 'box' },
                    {
                        id: 'Thompson sh',
                        label: 'Thompson sh',
                        group: 'shell',
                        shape: 'box',
                    },
                    {
                        id: 'Bourne sh',
                        label: 'Bourne sh',
                        group: 'shell',
                        shape: 'box',
                    },
                    { id: 'Bash', label: 'Bash', group: 'shell', shape: 'box' },
                    { id: 'Zsh', label: 'Zsh', group: 'shell', shape: 'box' },
                    {
                        id: 'PowerShell',
                        label: 'PowerShell',
                        group: 'shell',
                        shape: 'box',
                    },
                    {
                        id: 'CPL',
                        label: 'CPL',
                        group: 'intermediate',
                        shape: 'box',
                    },
                    {
                        id: 'BCPL',
                        label: 'BCPL',
                        group: 'intermediate',
                        shape: 'box',
                    },
                    {
                        id: 'B',
                        label: 'B',
                        group: 'intermediate',
                        shape: 'box',
                    },
                    {
                        id: 'Crystal',
                        label: 'Crystal',
                        group: 'c_syntax_modern',
                        shape: 'box',
                    },
                    {
                        id: 'Vale',
                        label: 'Vale',
                        group: 'c_syntax_modern',
                        shape: 'box',
                    },
                    {
                        id: 'Carbon',
                        label: 'Carbon',
                        group: 'c_syntax_modern',
                        shape: 'box',
                    },
                    {
                        id: 'Mojo',
                        label: 'Mojo',
                        group: 'c_syntax_modern',
                        shape: 'box',
                    },
                    {
                        id: 'COBOL',
                        label: 'COBOL',
                        group: 'pascal_like',
                        shape: 'box',
                    },
                    {
                        id: 'Svelte',
                        label: 'Svelte',
                        group: 'c_syntax_script',
                        shape: 'box',
                    },
                ];

                const processedNodes = initialNodesData.map((node) => {
                    const originalLabel = node.label;
                    node.labelOriginal = originalLabel;
                    node.goodAtCategories = [];
                    node.badAtCategories = [];
                    node.goodTagsDisplay = [];
                    node.badTagsDisplay = [];

                    const langRankings = languageRankingsData[originalLabel];
                    if (langRankings) {
                        categoriesOrder.forEach((cat) => {
                            // Iterate in defined order for tags
                            if (langRankings[cat] === undefined) return;

                            if (langRankings[cat] >= 4) {
                                node.goodAtCategories.push(cat);
                                node.goodTagsDisplay.push(
                                    categoryShortToFullName[cat] || cat
                                );
                            }
                            if (langRankings[cat] <= 2) {
                                node.badAtCategories.push(cat);
                                node.badTagsDisplay.push(
                                    categoryShortToFullName[cat] || cat
                                );
                            }
                        });
                    }
                    node.label = originalLabel; // Graph node label is just the name
                    return node;
                });

                nodesDataSet = new vis.DataSet(processedNodes);

                const edgeData = [
                    /* Omitted for brevity, same as before */
                    { from: 'Assembly', to: 'Fortran', arrows: 'to' },
                    { from: 'Assembly', to: 'COBOL', arrows: 'to' },
                    { from: 'Assembly', to: 'Algol 60', arrows: 'to' },
                    { from: 'Assembly', to: 'Lisp', arrows: 'to' },
                    { from: 'Assembly', to: 'APL', arrows: 'to' },
                    { from: 'Assembly', to: 'B', arrows: 'to' },
                    { from: 'Algol 60', to: 'CPL', arrows: 'to' },
                    { from: 'Algol 60', to: 'Pascal', arrows: 'to' },
                    { from: 'Algol 60', to: 'Simula', arrows: 'to' },
                    { from: 'Algol 60', to: 'Ada', arrows: 'to' },
                    { from: 'CPL', to: 'BCPL', arrows: 'to' },
                    { from: 'BCPL', to: 'B', arrows: 'to' },
                    { from: 'B', to: 'C', arrows: 'to' },
                    { from: 'C', to: 'C++', arrows: 'to' },
                    { from: 'C', to: 'Objective-C', arrows: 'to' },
                    { from: 'C', to: 'Perl', arrows: 'to' },
                    { from: 'C', to: 'Awk', arrows: 'to' },
                    { from: 'C', to: 'Python', arrows: 'to' },
                    { from: 'C', to: 'JavaScript', arrows: 'to' },
                    { from: 'C', to: 'PHP', arrows: 'to' },
                    { from: 'C', to: 'Go', arrows: 'to' },
                    { from: 'C', to: 'D', arrows: 'to' },
                    { from: 'C', to: 'Rust', arrows: 'to' },
                    { from: 'C', to: 'Java', arrows: 'to' },
                    { from: 'C++', to: 'Java', arrows: 'to' },
                    { from: 'C++', to: 'C#', arrows: 'to' },
                    { from: 'C++', to: 'D', arrows: 'to' },
                    { from: 'C++', to: 'Rust', arrows: 'to' },
                    { from: 'C++', to: 'Go', arrows: 'to' },
                    { from: 'C++', to: 'Zig', arrows: 'to' },
                    { from: 'C++', to: 'Odin', arrows: 'to' },
                    { from: 'C++', to: 'V', arrows: 'to' },
                    { from: 'C++', to: 'Swift', arrows: 'to' },
                    { from: 'C++', to: 'Carbon', arrows: 'to' },
                    { from: 'C++', to: 'Vale', arrows: 'to' },
                    { from: 'Objective-C', to: 'Swift', arrows: 'to' },
                    { from: 'Java', to: 'C#', arrows: 'to' },
                    { from: 'Java', to: 'Kotlin', arrows: 'to' },
                    { from: 'Java', to: 'Scala', arrows: 'to' },
                    { from: 'Java', to: 'Dart', arrows: 'to' },
                    { from: 'C#', to: 'F#', arrows: 'to' },
                    { from: 'C#', to: 'PowerShell', arrows: 'to' },
                    { from: 'ML', to: 'Standard ML', arrows: 'to' },
                    { from: 'ML', to: 'OCaml', arrows: 'to' },
                    { from: 'ML', to: 'Haskell', arrows: 'to' },
                    { from: 'ML', to: 'F#', arrows: 'to' },
                    { from: 'ML', to: 'Rust', arrows: 'to' },
                    { from: 'ML', to: 'Swift', arrows: 'to' },
                    { from: 'Standard ML', to: 'F#', arrows: 'to' },
                    { from: 'OCaml', to: 'F#', arrows: 'to' },
                    { from: 'OCaml', to: 'Rust', arrows: 'to' },
                    { from: 'OCaml', to: 'Swift', arrows: 'to' },
                    { from: 'OCaml', to: 'Vale', arrows: 'to' },
                    { from: 'Haskell', to: 'Scala', arrows: 'to' },
                    { from: 'Haskell', to: 'Rust', arrows: 'to' },
                    { from: 'Haskell', to: 'Nim', arrows: 'to' },
                    { from: 'Haskell', to: 'Swift', arrows: 'to' },
                    { from: 'Haskell', to: 'Elm', arrows: 'to' },
                    { from: 'Pascal', to: 'Modula-2', arrows: 'to' },
                    { from: 'Pascal', to: 'Ada', arrows: 'to' },
                    { from: 'Pascal', to: 'Oberon', arrows: 'to' },
                    { from: 'Pascal', to: 'Nim', arrows: 'to' },
                    { from: 'Pascal', to: 'Go', arrows: 'to' },
                    { from: 'Modula-2', to: 'Oberon', arrows: 'to' },
                    { from: 'Modula-2', to: 'Lua', arrows: 'to' },
                    { from: 'Modula-2', to: 'Python', arrows: 'to' },
                    { from: 'ABC', to: 'Python', arrows: 'to' },
                    { from: 'Lisp', to: 'Scheme', arrows: 'to' },
                    { from: 'Lisp', to: 'Common Lisp', arrows: 'to' },
                    { from: 'Lisp', to: 'Clojure', arrows: 'to' },
                    { from: 'Lisp', to: 'Racket', arrows: 'to' },
                    { from: 'Lisp', to: 'Julia', arrows: 'to' },
                    { from: 'Lisp', to: 'Dylan', arrows: 'to' },
                    { from: 'Lisp', to: 'Ruby', arrows: 'to' },
                    { from: 'Scheme', to: 'JavaScript', arrows: 'to' },
                    { from: 'Scheme', to: 'Lua', arrows: 'to' },
                    { from: 'Scheme', to: 'Python', arrows: 'to' },
                    { from: 'Scheme', to: 'Haskell', arrows: 'to' },
                    { from: 'Scheme', to: 'Racket', arrows: 'to' },
                    { from: 'Common Lisp', to: 'Clojure', arrows: 'to' },
                    { from: 'Common Lisp', to: 'Julia', arrows: 'to' },
                    { from: 'Simula', to: 'Smalltalk', arrows: 'to' },
                    { from: 'Simula', to: 'C++', arrows: 'to' },
                    { from: 'Smalltalk', to: 'Objective-C', arrows: 'to' },
                    { from: 'Smalltalk', to: 'Ruby', arrows: 'to' },
                    { from: 'Smalltalk', to: 'Python', arrows: 'to' },
                    { from: 'Smalltalk', to: 'Java', arrows: 'to' },
                    { from: 'Smalltalk', to: 'Self', arrows: 'to' },
                    { from: 'Awk', to: 'Perl', arrows: 'to' },
                    { from: 'Perl', to: 'PHP', arrows: 'to' },
                    { from: 'Perl', to: 'Ruby', arrows: 'to' },
                    { from: 'Perl', to: 'Python', arrows: 'to' },
                    { from: 'Python', to: 'Julia', arrows: 'to' },
                    { from: 'Python', to: 'Nim', arrows: 'to' },
                    { from: 'Python', to: 'Go', arrows: 'to' },
                    { from: 'Python', to: 'Mojo', arrows: 'to' },
                    { from: 'Python', to: 'Swift', arrows: 'to' },
                    { from: 'Python', to: 'Cobra', arrows: 'to' },
                    { from: 'JavaScript', to: 'TypeScript', arrows: 'to' },
                    { from: 'JavaScript', to: 'Dart', arrows: 'to' },
                    { from: 'JavaScript', to: 'Svelte', arrows: 'to' },
                    { from: 'JavaScript', to: 'CoffeeScript', arrows: 'to' },
                    { from: 'Prolog', to: 'Erlang', arrows: 'to' },
                    { from: 'Erlang', to: 'Elixir', arrows: 'to' },
                    { from: 'Fortran', to: 'S', arrows: 'to' },
                    { from: 'Fortran', to: 'MATLAB', arrows: 'to' },
                    { from: 'Fortran', to: 'SAS', arrows: 'to' },
                    { from: 'Fortran', to: 'Stata', arrows: 'to' },
                    { from: 'S', to: 'R', arrows: 'to' },
                    { from: 'R', to: 'Julia', arrows: 'to' },
                    { from: 'APL', to: 'J', arrows: 'to' },
                    { from: 'APL', to: 'K', arrows: 'to' },
                    { from: 'APL', to: 'S', arrows: 'to' },
                    { from: 'Thompson sh', to: 'Bourne sh', arrows: 'to' },
                    { from: 'Bourne sh', to: 'Bash', arrows: 'to' },
                    { from: 'Bourne sh', to: 'Ksh', arrows: 'to' },
                    { from: 'Bash', to: 'Zsh', arrows: 'to' },
                    { from: 'Bash', to: 'PowerShell', arrows: 'to' },
                    { from: 'Ruby', to: 'Elixir', arrows: 'to' },
                    { from: 'Ruby', to: 'Crystal', arrows: 'to' },
                    { from: 'Rust', to: 'Swift', arrows: 'to' },
                    { from: 'Rust', to: 'Vale', arrows: 'to' },
                    { from: 'Rust', to: 'Zig', arrows: 'to' },
                    { from: 'Rust', to: 'Carbon', arrows: 'to' },
                    { from: 'Go', to: 'Odin', arrows: 'to' },
                    { from: 'Go', to: 'V', arrows: 'to' },
                    { from: 'Go', to: 'Zig', arrows: 'to' },
                ];
                const edges = new vis.DataSet(edgeData);

                const options = {
                    /* Omitted for brevity, same as before, ensure node label parsing works with new format or adjust font size/margin if needed */
                    layout: {
                        hierarchical: {
                            enabled: true,
                            direction: 'UD',
                            sortMethod: 'directed',
                            levelSeparation: 180,
                            nodeSpacing: 160,
                            treeSpacing: 240,
                        },
                    },
                    nodes: {
                        shape: 'box',
                        font: {
                            face: '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif',
                            size: 13,
                            color: '#f5f5f7',
                        },
                        borderWidth: 0.8,
                        borderWidthSelected: 1.8,
                        shapeProperties: { borderRadius: 8 },
                        margin: { top: 12, right: 18, bottom: 12, left: 18 },
                        shadow: {
                            enabled: true,
                            color: 'rgba(0, 0, 0, 0.3)',
                            size: 7,
                            x: 2,
                            y: 3,
                        },
                    },
                    edges: {
                        arrows: {
                            to: {
                                enabled: true,
                                scaleFactor: 0.6,
                                type: 'arrow',
                            },
                        },
                        smooth: {
                            enabled: true,
                            type: 'cubicBezier',
                            forceDirection: 'vertical',
                            roundness: 0.4,
                        },
                        color: {
                            color: '#505053',
                            highlight: '#8a8a8e',
                            hover: '#6a6a6e',
                            inherit: false,
                            opacity: 0.85,
                        },
                        width: 0.9,
                        hoverWidth: 1.3,
                        selectionWidth: 1.6,
                    },
                    physics: { enabled: false },
                    interaction: {
                        dragNodes: false,
                        dragView: true,
                        zoomView: true,
                        tooltipDelay: 200,
                        navigationButtons: true,
                        keyboard: true,
                        selectConnectedEdges: false,
                    },
                    groups: {
                        c_syntax_algol: {
                            color: {
                                background: 'rgba(40, 45, 55, 0.9)',
                                border: '#4a5568',
                            },
                        },
                        c_syntax_core: {
                            color: {
                                background: 'rgba(45, 50, 60, 0.9)',
                                border: '#5a6578',
                            },
                        },
                        c_syntax_jvm: {
                            color: {
                                background: 'rgba(50, 45, 65, 0.9)',
                                border: '#6b5f8a',
                            },
                        },
                        c_syntax_modern: {
                            color: {
                                background: 'rgba(40, 55, 50, 0.9)',
                                border: '#486a5f',
                            },
                        },
                        c_syntax_script: {
                            color: {
                                background: 'rgba(40, 55, 55, 0.9)',
                                border: '#4a6b6b',
                            },
                        },
                        lisp: {
                            color: {
                                background: 'rgba(60, 50, 40, 0.9)',
                                border: '#8a705b',
                            },
                        },
                        ml: {
                            color: {
                                background: 'rgba(40, 60, 50, 0.9)',
                                border: '#4a7565',
                            },
                        },
                        smalltalk: {
                            color: {
                                background: 'rgba(60, 40, 45, 0.9)',
                                border: '#8a5b65',
                            },
                        },
                        stats: {
                            color: {
                                background: 'rgba(55, 45, 60, 0.9)',
                                border: '#7a608a',
                            },
                        },
                        array: {
                            color: {
                                background: 'rgba(60, 45, 55, 0.9)',
                                border: '#8a607a',
                            },
                        },
                        shell: {
                            color: {
                                background: 'rgba(45, 50, 65, 0.9)',
                                border: '#5a658a',
                            },
                        },
                        pascal_like: {
                            color: {
                                background: 'rgba(65, 50, 40, 0.9)',
                                border: '#9a705b',
                            },
                        },
                        logic: {
                            color: {
                                background: 'rgba(55, 45, 65, 0.9)',
                                border: '#7a609a',
                            },
                        },
                        misc: {
                            color: {
                                background: 'rgba(55, 55, 55, 0.9)',
                                border: '#777777',
                            },
                        },
                        intermediate: {
                            color: {
                                background: 'rgba(65, 65, 65, 0.9)',
                                border: '#888888',
                            },
                        },
                    },
                };

                Object.keys(options.groups).forEach((groupName) => {
                    /* Omitted for brevity, same as before */
                    if (options.groups[groupName].color) {
                        const baseColor = options.groups[groupName].color;
                        options.groups[groupName].color.highlight = {
                            background: baseColor.border,
                            border: baseColor.border,
                        };
                        options.groups[groupName].color.hover = {
                            background: baseColor.background,
                            border: baseColor.border,
                        };
                    }
                });

                allNodesOriginalStyles.clear();
                nodesDataSet.forEach((node) => {
                    const groupSettings = options.groups[node.group];
                    let bg =
                        options.nodes.color && options.nodes.color.background
                            ? options.nodes.color.background
                            : 'rgba(55, 55, 55, 0.9)';
                    let bd =
                        options.nodes.color && options.nodes.color.border
                            ? options.nodes.color.border
                            : '#777777';
                    let fontColor =
                        options.nodes.font && options.nodes.font.color
                            ? options.nodes.font.color
                            : '#f5f5f7';

                    if (groupSettings && groupSettings.color) {
                        bg = groupSettings.color.background || bg;
                        bd = groupSettings.color.border || bd;
                    }
                    allNodesOriginalStyles.set(node.id, {
                        color: { background: bg, border: bd },
                        font: { color: fontColor },
                        borderWidth: options.nodes.borderWidth || 0.8,
                        label: node.labelOriginal,
                    });
                });

                const data = { nodes: nodesDataSet, edges: edges };
                network = new vis.Network(container, data, options);

                function ShowSidebar(nodeId) {
                    const nodeData = nodesDataSet.get(nodeId);
                    if (!nodeData) return;

                    sidebarTitle.textContent = nodeData.labelOriginal;

                    languageTagsList.innerHTML = '';
                    if (
                        nodeData.goodTagsDisplay &&
                        nodeData.goodTagsDisplay.length > 0
                    ) {
                        nodeData.goodTagsDisplay.forEach((fullTagName) => {
                            const li = document.createElement('li');
                            li.textContent = `👍 ${fullTagName}`;
                            li.style.backgroundColor =
                                'rgba(48, 209, 88, 0.25)'; // Apple Green, more subtle bg
                            li.style.border =
                                '1px solid rgba(48, 209, 88, 0.5)';
                            languageTagsList.appendChild(li);
                        });
                    }
                    if (
                        nodeData.badTagsDisplay &&
                        nodeData.badTagsDisplay.length > 0
                    ) {
                        nodeData.badTagsDisplay.forEach((fullTagName) => {
                            const li = document.createElement('li');
                            li.textContent = `👎 ${fullTagName}`;
                            li.style.backgroundColor =
                                'rgba(255, 69, 58, 0.25)'; // Apple Red, more subtle bg
                            li.style.border =
                                '1px solid rgba(255, 69, 58, 0.5)';
                            languageTagsList.appendChild(li);
                        });
                    }

                    influencedByList.innerHTML = '';
                    influencesList.innerHTML = '';
                    rankingsList.innerHTML = '';

                    const incomingEdges = edgeData.filter(
                        (edge) => edge.to === nodeId
                    );
                    incomingEdges.forEach((edge) => {
                        const influencerNode = nodesDataSet.get(edge.from);
                        if (influencerNode) {
                            const li = document.createElement('li');
                            li.textContent = influencerNode.labelOriginal;
                            influencedByList.appendChild(li);
                        }
                    });
                    if (influencedByList.children.length === 0)
                        influencedByList.innerHTML =
                            '<li>None in this graph</li>';

                    const outgoingEdges = edgeData.filter(
                        (edge) => edge.from === nodeId
                    );
                    outgoingEdges.forEach((edge) => {
                        const influencedNode = nodesDataSet.get(edge.to);
                        if (influencedNode) {
                            const li = document.createElement('li');
                            li.textContent = influencedNode.labelOriginal;
                            influencesList.appendChild(li);
                        }
                    });
                    if (influencesList.children.length === 0)
                        influencesList.innerHTML =
                            '<li>None in this graph</li>';

                    const langRankings =
                        languageRankingsData[nodeData.labelOriginal];
                    if (langRankings) {
                        categoriesOrder.forEach((catShort) => {
                            // Use defined order
                            if (langRankings[catShort] === undefined) return;
                            const score = langRankings[catShort];
                            const legendText = rankLegend[score] || 'N/A';
                            const li = document.createElement('li');
                            li.textContent = `${
                                categoryShortToFullName[catShort] || catShort
                            }: ${score} (${legendText})`;
                            rankingsList.appendChild(li);
                        });
                    } else {
                        rankingsList.innerHTML =
                            '<li>Rankings not available.</li>';
                    }

                    syntaxExample.textContent =
                        syntaxData[nodeData.labelOriginal] ||
                        'Syntax example not available.';
                    sidebar.classList.add('visible');
                }

                function HideSidebar() {
                    sidebar.classList.remove('visible');
                }

                network.on('click', function (params) {
                    if (params.nodes.length > 0) {
                        ShowSidebar(params.nodes[0]);
                    } else {
                        HideSidebar();
                    }
                });
                closeSidebarButton.addEventListener('click', HideSidebar);
                graphContainer.addEventListener(
                    'click',
                    function (event) {
                        /* Omitted for brevity */
                        if (
                            sidebar.classList.contains('visible') &&
                            !sidebar.contains(event.target) &&
                            event.target.closest('.vis-network') === container
                        ) {
                            const networkCanvas =
                                container.querySelector('canvas');
                            if (
                                networkCanvas &&
                                networkCanvas.contains(event.target)
                            ) {
                                HideSidebar();
                            } else if (
                                event.target === graphContainer ||
                                event.target === container
                            ) {
                                HideSidebar();
                            }
                        }
                    },
                    true
                );

                rankingsHeader.addEventListener('click', () => {
                    rankingsList.classList.toggle('collapsed');
                    rankingsToggleArrow.classList.toggle('collapsed-arrow');
                    rankingsToggleArrow.textContent =
                        rankingsList.classList.contains('collapsed')
                            ? '▶'
                            : '▼';
                });

                network.on(
                    'stabilizationIterationsDone',
                    () => (loadingMessage.style.display = 'none')
                );
                setTimeout(() => {
                    if (loadingMessage) loadingMessage.style.display = 'none';
                }, 2000);
            }

            function setupHighlightControls() {
                const categorySelect =
                    document.getElementById('categorySelect');
                const highlightGoodBtn =
                    document.getElementById('highlightGoodBtn');
                const highlightBadBtn =
                    document.getElementById('highlightBadBtn');
                const resetBtn = document.getElementById('resetHighlights');

                categorySelect.innerHTML = '';
                categoriesOrder.forEach((catShort) => {
                    // Use defined order for dropdown
                    const option = document.createElement('option');
                    option.value = catShort;
                    option.textContent =
                        categoryShortToFullName[catShort] || catShort;
                    categorySelect.appendChild(option);
                });

                highlightGoodBtn.addEventListener('click', () => {
                    const selectedCategory = categorySelect.value;
                    handleHighlightButtonClick(
                        selectedCategory,
                        'good',
                        highlightGoodBtn
                    );
                });
                highlightBadBtn.addEventListener('click', () => {
                    const selectedCategory = categorySelect.value;
                    handleHighlightButtonClick(
                        selectedCategory,
                        'bad',
                        highlightBadBtn
                    );
                });
                resetBtn.addEventListener('click', resetNodeHighlights);
            }

            let activeHighlightButton = null;

            function handleHighlightButtonClick(category, type, clickedButton) {
                const allControlButtons = [
                    document.getElementById('highlightGoodBtn'),
                    document.getElementById('highlightBadBtn'),
                ];
                allControlButtons.forEach((btn) =>
                    btn.classList.remove(
                        'active-highlight-good',
                        'active-highlight-bad'
                    )
                );

                if (activeHighlightButton === clickedButton) {
                    resetNodeHighlights();
                } else {
                    highlightNodes(category, type);
                    clickedButton.classList.add(
                        type === 'good'
                            ? 'active-highlight-good'
                            : 'active-highlight-bad'
                    );
                    activeHighlightButton = clickedButton;
                }
            }

            function highlightNodes(category, type) {
                if (!network || !nodesDataSet) return;
                const updates = [];
                nodesDataSet.getIds().forEach((nodeId) => {
                    const node = nodesDataSet.get(nodeId);
                    const originalStyle = allNodesOriginalStyles.get(nodeId);
                    const langRankings =
                        languageRankingsData[node.labelOriginal];
                    let isMatch = false;

                    if (langRankings && langRankings[category] !== undefined) {
                        const score = langRankings[category];
                        if (type === 'good' && score >= 4) isMatch = true;
                        if (type === 'bad' && score <= 2) isMatch = true;
                    }

                    let newStyle = {};
                    if (isMatch) {
                        newStyle = {
                            color: {
                                border: type === 'good' ? '#30d158' : '#ff453a',
                                background: originalStyle.color.background,
                            },
                            borderWidth: 2.5,
                            font: { color: originalStyle.font.color },
                            label: originalStyle.label,
                        };
                    } else {
                        newStyle = {
                            color: {
                                background: 'rgba(30, 30, 32, 0.7)', // Darker, more transparent
                                border: 'rgba(60, 60, 62, 0.7)',
                            },
                            borderWidth: originalStyle.borderWidth,
                            font: { color: '#757575' }, // Dimmer font
                            label: originalStyle.label,
                        };
                    }
                    updates.push({ id: nodeId, ...newStyle });
                });
                if (updates.length > 0) {
                    nodesDataSet.update(updates);
                }
            }

            function resetNodeHighlights() {
                if (!network || !nodesDataSet) return;

                const allControlButtons = [
                    document.getElementById('highlightGoodBtn'),
                    document.getElementById('highlightBadBtn'),
                ];
                allControlButtons.forEach((btn) =>
                    btn.classList.remove(
                        'active-highlight-good',
                        'active-highlight-bad'
                    )
                );
                activeHighlightButton = null;

                const updates = [];
                nodesDataSet.getIds().forEach((nodeId) => {
                    const originalStyle = allNodesOriginalStyles.get(nodeId);
                    if (originalStyle) {
                        updates.push({
                            id: nodeId,
                            color: originalStyle.color,
                            font: originalStyle.font,
                            borderWidth: originalStyle.borderWidth,
                            label: originalStyle.label,
                        });
                    }
                });
                if (updates.length > 0) {
                    nodesDataSet.update(updates);
                }
            }

            window.addEventListener('load', () => {
                DrawGraph();
                setupHighlightControls();
            });
        </script>
    </body>
</html>
